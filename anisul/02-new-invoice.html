<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport">

    <title>CoinSimple - Your Bitcoin Business Dashboard</title>
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="assets/icon_font.css">
	
    <link data-turbolinks-track="true" href="assets/coinsimple.css" media="all" rel="stylesheet">
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	
	<link rel="stylesheet/less" type="text/css" href="assets/style.less" />
	<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.3.1/less.min.js"></script>
	
	<link rel="stylesheet" href="assets/responsive.css" />
	
	<script type="text/javascript">
		$(document).ready(function(){
			$(".toggle_menu").click(function(){
				$(".sidebar").slideToggle();
			});
		});
	</script>
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">&nbsp;&nbsp;&nbsp;<img alt="Icon" src="./assets/logo.png"></a>
            </div>
			<span class="toggle_menu">
				<img src="assets/toggle_menu_icon.png" alt="" />
			</span>

            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
					<li class="message_alert">
						<a href="#"><span class="glyphicon glyphicon-bell" aria-hidden="true"></span> </a>
					</li>
                    <li class="user-icon dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" style="margin-left: 20px"><img alt="4c7f33da1465b43a770eb785539a3d07?s=48" class="profile_image_circle" src="./assets/4c7f33da1465b43a770eb785539a3d07.png">&nbsp;&nbsp;<span class="name">Nikos Bentenitis</span> <span class="caret"></span></a>

                        <ul class="dropdown-menu">
                            <li style="margin-left: 20px">
                                <span class="icon-folder"></span><a href="04-business-settings.html">Settings</a>
                            </li>

                            <li style="margin-left: 20px">
                                <a href="mission_control">Admin Panel</a>
                            </li>

                            <li style="margin-left: 20px">
                                <a href="logout">Log out</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav> 
    <div class="container">
        <div class="row controls">
            <div class="col-md-3 sidebar">
                <h3><i class="glyphicon glyphicon-briefcase"></i>&nbsp;&nbsp;&nbsp;<a href="dash">Dashboard</a></h3>
            </div>

            <div class="col-md-9 primary large_header">
                <h1>Eureka Science</h1>
            </div>
        </div>

        <div class="row account-summary">
            <a class="col-md-3 sidebar" href=""><img alt="Arrow" class="pull-right" src="./assets/arrow-6e65598bbdefb6e4ffd010962dc474a7.png"> <i class="glyphicon glyphicon-tasks"></i>&nbsp;&nbsp;&nbsp;Invoices</a>

            <div class="col-md-9 primary large_header subnav">
                New Invoice
            </div>
        </div>

        <div class="row">
            <div class="col-md-3 sidebar">
                <a class="settings menu_row" href="/buttons"><i class="glyphicon glyphicon-tasks"></i>&nbsp;&nbsp;&nbsp;Buttons</a> <a class="settings menu_row" href="/stats"><i class="glyphicon glyphicon-stats"></i>&nbsp;&nbsp;&nbsp;Analytics</a> <a class="settings menu_row" href="/settings"><i class="glyphicon glyphicon-cog"></i>&nbsp;&nbsp;&nbsp;Settings</a>
            </div>

            <div class="col-md-9 primary">
                <form accept-charset="UTF-8" action="./assets/02-new-invoice.html" class="new_invoice" id="invoice_form" method="post" name="invoice_form">
                    <div style="display:none">
                        <input name="utf8" type="hidden" value="âœ“"><input name="authenticity_token" type="hidden" value="bJRvuHEFqflUQHMCCOnk63mruPk6oaHuR4vvJWXd+mo=">
                    </div>

                    <div id="error_container"></div>

                    <div class="row shaded invoice-details">
                        <div class="col-md-6">
                            <label for="invoice_recipient">Client: <input class="pull-right clearfix" id="invoice_recipient" name="invoice[recipient]" placeholder="Client or business name" type="text"></label>
                        </div>

                        <div class="col-md-6">
                            <label for="invoice_email">Email: <input class="pull-right clearfix" id="invoice_email" name="invoice[email]" placeholder="client@example.com" type="text"></label>
                        </div>

                        <div class="col-md-12">
                            <label class="invoice_address_label" for="invoice_address">Address:<textarea id="invoice_address" name="invoice[address]"></textarea></label>
                        </div> 

                        <div class="col-md-6">
                            <label for="invoice_currency"><span class="tooltip_container" data-open="tooltip" data-text="Select the currency that your products or services are priced in. The price can be expressed in any national currency or in bitcoin">Price in: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Select the currency that your products or services are priced in. The price can be expressed in any national currency or in bitcoin" data-toggle="tooltip" title=""></span></span> <select class="pull-right clearfix" id="invoice_currency" name="invoice[currency]">
                                <option value="aed">
                                    AED
                                </option>

                                <option value="afn">
                                    AFN
                                </option>

                                <option value="all">
                                    ALL
                                </option>

                                <option value="amd">
                                    AMD
                                </option>

                                <option value="ang">
                                    ANG
                                </option>

                                <option value="aoa">
                                    AOA
                                </option>

                                <option value="ars">
                                    ARS
                                </option>

                                <option value="aud">
                                    AUD
                                </option>

                                <option value="awg">
                                    AWG
                                </option>

                                <option value="azn">
                                    AZN
                                </option>

                                <option value="bam">
                                    BAM
                                </option>

                                <option value="bbd">
                                    BBD
                                </option>

                                <option value="bdt">
                                    BDT
                                </option>

                                <option value="bgn">
                                    BGN
                                </option>

                                <option value="bhd">
                                    BHD
                                </option>

                                <option value="bif">
                                    BIF
                                </option>

                                <option value="bmd">
                                    BMD
                                </option>

                                <option value="bnd">
                                    BND
                                </option>

                                <option value="bob">
                                    BOB
                                </option>

                                <option value="brl">
                                    BRL
                                </option>

                                <option value="bsd">
                                    BSD
                                </option>

                                <option value="btc">
                                    BTC
                                </option>

                                <option value="btn">
                                    BTN
                                </option>

                                <option value="bwp">
                                    BWP
                                </option>

                                <option value="byr">
                                    BYR
                                </option>

                                <option value="bzd">
                                    BZD
                                </option>

                                <option value="cad">
                                    CAD
                                </option>

                                <option value="cdf">
                                    CDF
                                </option>

                                <option value="chf">
                                    CHF
                                </option>

                                <option value="clf">
                                    CLF
                                </option>

                                <option value="clp">
                                    CLP
                                </option>

                                <option value="cny">
                                    CNY
                                </option>

                                <option value="cop">
                                    COP
                                </option>

                                <option value="crc">
                                    CRC
                                </option>

                                <option value="cuc">
                                    CUC
                                </option>

                                <option value="cup">
                                    CUP
                                </option>

                                <option value="cve">
                                    CVE
                                </option>

                                <option value="czk">
                                    CZK
                                </option>

                                <option value="djf">
                                    DJF
                                </option>

                                <option value="dkk">
                                    DKK
                                </option>

                                <option value="dop">
                                    DOP
                                </option>

                                <option value="dzd">
                                    DZD
                                </option>

                                <option value="eek">
                                    EEK
                                </option>

                                <option value="egp">
                                    EGP
                                </option>

                                <option value="ern">
                                    ERN
                                </option>

                                <option value="etb">
                                    ETB
                                </option>

                                <option selected="selected" value="eur">
                                    EUR
                                </option>

                                <option value="fjd">
                                    FJD
                                </option>

                                <option value="fkp">
                                    FKP
                                </option>

                                <option value="gbp">
                                    GBP
                                </option>

                                <option value="gel">
                                    GEL
                                </option>

                                <option value="ggp">
                                    GGP
                                </option>

                                <option value="ghs">
                                    GHS
                                </option>

                                <option value="gip">
                                    GIP
                                </option>

                                <option value="gmd">
                                    GMD
                                </option>

                                <option value="gnf">
                                    GNF
                                </option>

                                <option value="gtq">
                                    GTQ
                                </option>

                                <option value="gyd">
                                    GYD
                                </option>

                                <option value="hkd">
                                    HKD
                                </option>

                                <option value="hnl">
                                    HNL
                                </option>

                                <option value="hrk">
                                    HRK
                                </option>

                                <option value="htg">
                                    HTG
                                </option>

                                <option value="huf">
                                    HUF
                                </option>

                                <option value="idr">
                                    IDR
                                </option>

                                <option value="ils">
                                    ILS
                                </option>

                                <option value="imp">
                                    IMP
                                </option>

                                <option value="inr">
                                    INR
                                </option>

                                <option value="iqd">
                                    IQD
                                </option>

                                <option value="irr">
                                    IRR
                                </option>

                                <option value="isk">
                                    ISK
                                </option>

                                <option value="jep">
                                    JEP
                                </option>

                                <option value="jmd">
                                    JMD
                                </option>

                                <option value="jod">
                                    JOD
                                </option>

                                <option value="jpy">
                                    JPY
                                </option>

                                <option value="kes">
                                    KES
                                </option>

                                <option value="kgs">
                                    KGS
                                </option>

                                <option value="khr">
                                    KHR
                                </option>

                                <option value="kmf">
                                    KMF
                                </option>

                                <option value="kpw">
                                    KPW
                                </option>

                                <option value="krw">
                                    KRW
                                </option>

                                <option value="kwd">
                                    KWD
                                </option>

                                <option value="kyd">
                                    KYD
                                </option>

                                <option value="kzt">
                                    KZT
                                </option>

                                <option value="lak">
                                    LAK
                                </option>

                                <option value="lbp">
                                    LBP
                                </option>

                                <option value="lkr">
                                    LKR
                                </option>

                                <option value="lrd">
                                    LRD
                                </option>

                                <option value="lsl">
                                    LSL
                                </option>

                                <option value="ltl">
                                    LTL
                                </option>

                                <option value="lvl">
                                    LVL
                                </option>

                                <option value="lyd">
                                    LYD
                                </option>

                                <option value="mad">
                                    MAD
                                </option>

                                <option value="mdl">
                                    MDL
                                </option>

                                <option value="mga">
                                    MGA
                                </option>

                                <option value="mkd">
                                    MKD
                                </option>

                                <option value="mmk">
                                    MMK
                                </option>

                                <option value="mnt">
                                    MNT
                                </option>

                                <option value="mop">
                                    MOP
                                </option>

                                <option value="mro">
                                    MRO
                                </option>

                                <option value="mtl">
                                    MTL
                                </option>

                                <option value="mur">
                                    MUR
                                </option>

                                <option value="mvr">
                                    MVR
                                </option>

                                <option value="mwk">
                                    MWK
                                </option>

                                <option value="mxn">
                                    MXN
                                </option>

                                <option value="myr">
                                    MYR
                                </option>

                                <option value="mzn">
                                    MZN
                                </option>

                                <option value="nad">
                                    NAD
                                </option>

                                <option value="ngn">
                                    NGN
                                </option>

                                <option value="nio">
                                    NIO
                                </option>

                                <option value="nok">
                                    NOK
                                </option>

                                <option value="npr">
                                    NPR
                                </option>

                                <option value="nzd">
                                    NZD
                                </option>

                                <option value="omr">
                                    OMR
                                </option>

                                <option value="pab">
                                    PAB
                                </option>

                                <option value="pen">
                                    PEN
                                </option>

                                <option value="pgk">
                                    PGK
                                </option>

                                <option value="php">
                                    PHP
                                </option>

                                <option value="pkr">
                                    PKR
                                </option>

                                <option value="pln">
                                    PLN
                                </option>

                                <option value="pyg">
                                    PYG
                                </option>

                                <option value="qar">
                                    QAR
                                </option>

                                <option value="ron">
                                    RON
                                </option>

                                <option value="rsd">
                                    RSD
                                </option>

                                <option value="rub">
                                    RUB
                                </option>

                                <option value="rwf">
                                    RWF
                                </option>

                                <option value="sar">
                                    SAR
                                </option>

                                <option value="sbd">
                                    SBD
                                </option>

                                <option value="scr">
                                    SCR
                                </option>

                                <option value="sdg">
                                    SDG
                                </option>

                                <option value="sek">
                                    SEK
                                </option>

                                <option value="sgd">
                                    SGD
                                </option>

                                <option value="shp">
                                    SHP
                                </option>

                                <option value="sll">
                                    SLL
                                </option>

                                <option value="sos">
                                    SOS
                                </option>

                                <option value="srd">
                                    SRD
                                </option>

                                <option value="std">
                                    STD
                                </option>

                                <option value="svc">
                                    SVC
                                </option>

                                <option value="syp">
                                    SYP
                                </option>

                                <option value="szl">
                                    SZL
                                </option>

                                <option value="thb">
                                    THB
                                </option>

                                <option value="tjs">
                                    TJS
                                </option>

                                <option value="tmm">
                                    TMM
                                </option>

                                <option value="tmt">
                                    TMT
                                </option>

                                <option value="tnd">
                                    TND
                                </option>

                                <option value="top">
                                    TOP
                                </option>

                                <option value="try">
                                    TRY
                                </option>

                                <option value="ttd">
                                    TTD
                                </option>

                                <option value="twd">
                                    TWD
                                </option>

                                <option value="tzs">
                                    TZS
                                </option>

                                <option value="uah">
                                    UAH
                                </option>

                                <option value="ugx">
                                    UGX
                                </option>

                                <option value="usd">
                                    USD
                                </option>

                                <option value="uyu">
                                    UYU
                                </option>

                                <option value="uzs">
                                    UZS
                                </option>

                                <option value="vef">
                                    VEF
                                </option>

                                <option value="vnd">
                                    VND
                                </option>

                                <option value="vuv">
                                    VUV
                                </option>

                                <option value="wst">
                                    WST
                                </option>

                                <option value="xaf">
                                    XAF
                                </option>

                                <option value="xag">
                                    XAG
                                </option>

                                <option value="xau">
                                    XAU
                                </option>

                                <option value="xcd">
                                    XCD
                                </option>

                                <option value="xdr">
                                    XDR
                                </option>

                                <option value="xof">
                                    XOF
                                </option>

                                <option value="xpf">
                                    XPF
                                </option>

                                <option value="yer">
                                    YER
                                </option>

                                <option value="zar">
                                    ZAR
                                </option>

                                <option value="zmk">
                                    ZMK
                                </option>

                                <option value="zmw">
                                    ZMW
                                </option>

                                <option value="zwl">
                                    ZWL
                                </option>
                            </select></label>
                        </div>

                        <div class="col-md-6">
                            <label for="invoice_processor"><span class="tooltip_container" data-open="tooltip" data-text="Select the Bitcoin wallet or payment processor where you would like to receive your bitcoins.">Receive using: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Select the Bitcoin wallet or payment processor where you would like to receive your bitcoins." data-toggle="tooltip" title=""></span></span> <select class="pull-right clearfix" id="invoice_processor" name="invoice[processor]">
                                <optgroup label="My Wallets">
                                    <option selected="selected" value="armory">
                                        Armory
                                    </option>

                                    <option value="trezor">
                                        Trezor
                                    </option>

                                    <option value="multisigelectrum">
                                        Multi-Sig Electrum
                                    </option>
                                </optgroup>

                                <optgroup label="My Exchanges">
                                    <option value="mexbt">
                                        MeXBT
                                    </option>
                                </optgroup>

                                <optgroup label="My Processors">
                                    <option value="gocoin">
                                        GoCoin
                                    </option>
                                </optgroup>
                            </select></label>
                        </div>
                    </div>

                    <div class="row shaded invoice-details" id="second_settings_section" style="margin-top:-100px">
                        <div class="col-xs-12 col-md-6">
                            <label for="invoice_conversion_method"><span class="tooltip_container" data-open="tooltip" data-text="Select the source for the bitcoin price, or set your own price by selecting Custom. The bitcoin price will be shown to your clients when they select to pay your invoice.">BTC price from: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Select the source for the bitcoin price, or set your own price by selecting Custom. The bitcoin price will be shown to your clients when they select to pay your invoice." data-toggle="tooltip" title=""></span></span> <select class="pull-right clearfix" id="invoice_conversion_method" name="invoice[conversion_method]">
                                <option selected="selected" value="bitpay">
                                    BitPay
                                </option>

                                <option value="bitcoinaverage">
                                    Bitcoin Average
                                </option>

                                <option value="blockchain">
                                    Blockchain.info
                                </option>

                                <option value="coinbase">
                                    Coinbase
                                </option>

                                <option value="coindesk">
                                    Coindesk
                                </option>

                                <option value="custom">
                                    Custom
                                </option>
                            </select></label>
                        </div>

                        <div class="col-md-6" id="custom_conversion_rate">
                            <label for="conversion_rate" style="display: none;"><span class="tooltip_container" data-open="tooltip" data-text="Set your own price of bitcoin in units of the national currency you chose.">Set price: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Set your own price of bitcoin in units of the national currency you chose." data-toggle="tooltip" title=""></span></span> <input class="pull-right clearfix" id="conversion_rate" name="conversion_rate" style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==); background-attachment: scroll; background-position: 100% 50%; background-repeat: no-repeat;" type="text"></label>
                        </div>

                        <div class="col-md-12"></div><input id="percent_type" name="percent_type" type="hidden" value="discount">

                        <div class="col-md-6">
                            <label for="discount"><span class="tooltip_container" data-open="tooltip" data-text="If you would like to offer a discount to your client for paying in bitcoin select it here.">Apply discount: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="If you would like to offer a discount to your client for paying in bitcoin select it here." data-toggle="tooltip" title=""></span></span></label>

                            <div class="pull-right inline_switch">
                                <div class="onoffswitch">
                                    <input class="onoffswitch-checkbox" id="discount" name="discount" type="checkbox" value="on"> <label class="onoffswitch-label" for="discount" id="discount_label"><span class="onoffswitch-inner"></span> <span class="onoffswitch-switch"></span></label>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-6" id="discount_settings" style="">
                            <label for="invoice_percent"><span class="tooltip_container" data-open="tooltip" data-text="Enter a number between 0 and 100 for the percent discount">% discount: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Enter a number between 0 and 100 for the percent discount" data-toggle="tooltip" title=""></span></span></label>

                            <div class="input-group pull-right clearfix number_with_percent">
                                <input class="pull-right clearfix" id="invoice_percent" max="100" min="0" name="invoice[percent]" placeholder="0" step="0.5" type="number"> <span class="input-group-addon">%</span>
                            </div>
                        </div>
                    </div>

                    <h2 class="no-border">Invoice Items</h2>

                     <div class="custom_table">
						<div class="description">
							Item Description
							<div class="both">
								<a style="font-style: italic" href="/invoice/new#" class="remove_item glyphicon glyphicon-remove"></a>
								<input type="text" />
							</div>
						</div>
						<div class="qty">
							Qty
							<div>
								<input type="text" value="0" name="invoice[items_attributes][][quantity]" id="invoice_items_attributes__quantity" class="item_qty">
							</div>
						</div>
						<div class="u_price">
							Unit Price
							<div>
								<input type="text" value="0" name="invoice[items_attributes][][price]" id="invoice_items_attributes__price" class="item_price">
							</div>
						</div>
						<div class="total_price">
							Total Price
							<div><span>0 EUR</span></div>
						</div>
					</div>
					<a class="btn btn-default" href="/invoice/new#" id="add_item_button">Add Line Item</a>

                    <h2>Invoice Totals</h2>

                    <table class="totals">
                        <tbody>
                            <tr class="subtotal">
                                <td>Subtotal:</td>

                                <td class="shaded" id="sub_total">0 EUR</td>
                            </tr>

                            <tr class="grand-total">
                                <td>Total Due:</td>

                                <td class="total" id="full_total">0 EUR</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2>Terms and Notes</h2>
                    <textarea id="invoice_notes" name="invoice[notes]">
</textarea>

                    <div class="shaded recurring">
                        <div class="pull-right">
                            <div class="onoffswitch">
                                <input class="onoffswitch-checkbox" id="recurring" name="recurring" type="checkbox" value="on"> <label class="onoffswitch-label" for="recurring" id="recurring_label"><span class="onoffswitch-inner"></span> <span class="onoffswitch-switch"></span></label>
                            </div>
                        </div>Recurring Invoice
                    </div>

                    <div class="row shaded invoice-details" id="recurring_settings" style="margin-bottom: 25px;">
                        <div class="col-md-6">
                            <label for="recurring_type"><span class="tooltip_container" data-open="tooltip" data-text="Select Monthly, if you want to send your invoice on a certain day of the month and then choose the day of the month from the dropdown menu on the right. Select Daily, if you want to send your invoice every few days and then choose the number of days from the dropdown menu on the right.">Repeats: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Select Monthly, if you want to send your invoice on a certain day of the month and then choose the day of the month from the dropdown menu on the right. Select Daily, if you want to send your invoice every few days and then choose the number of days from the dropdown menu on the right." data-toggle="tooltip" title=""></span></span> <select class="pull-right clearfix" id="recurring_type" name="recurring_type">
                                <option value="date">
                                    Monthly
                                </option>

                                <option value="days">
                                    Daily
                                </option>
                            </select></label>
                        </div>

                        <div class="col-md-6" id="invoice_interval_container">
                            <label for="invoice_interval">Day of month: <select id="invoice_interval" name="invoice[interval]">
                                <option value="1">
                                    1
                                </option>

                                <option value="2">
                                    2
                                </option>

                                <option value="3">
                                    3
                                </option>

                                <option value="4">
                                    4
                                </option>

                                <option value="5">
                                    5
                                </option>

                                <option value="6">
                                    6
                                </option>

                                <option value="7">
                                    7
                                </option>

                                <option value="8">
                                    8
                                </option>

                                <option value="9">
                                    9
                                </option>

                                <option value="10">
                                    10
                                </option>

                                <option value="11">
                                    11
                                </option>

                                <option value="12">
                                    12
                                </option>

                                <option value="13">
                                    13
                                </option>

                                <option value="14">
                                    14
                                </option>

                                <option value="15">
                                    15
                                </option>

                                <option value="16">
                                    16
                                </option>

                                <option value="17">
                                    17
                                </option>

                                <option value="18">
                                    18
                                </option>

                                <option value="19">
                                    19
                                </option>

                                <option value="20">
                                    20
                                </option>

                                <option value="21">
                                    21
                                </option>

                                <option value="22">
                                    22
                                </option>

                                <option value="23">
                                    23
                                </option>

                                <option value="24">
                                    24
                                </option>

                                <option value="25">
                                    25
                                </option>

                                <option value="26">
                                    26
                                </option>

                                <option value="27">
                                    27
                                </option>

                                <option value="28">
                                    28
                                </option>

                                <option value="29">
                                    29
                                </option>

                                <option value="30">
                                    30
                                </option>

                                <option value="31">
                                    31
                                </option>

                                <option value="-1">
                                    Day before last
                                </option>

                                <option value="0">
                                    Last day
                                </option>
                            </select></label>
                        </div>

                        <div class="col-md-6">
                            <label for="recurring_times_type"><span class="tooltip_container" data-open="tooltip" data-text="Select Until deleted, if you want your invoice to be sent to your client until you delete the invoice. Select For X times, if you want to sent the invoice a few times, and then choose the number of times from the dropdown menu on the right.">Valid: <span class="tooltip_icon glyphicon glyphicon-question-sign" data-original-title="Select Until deleted, if you want your invoice to be sent to your client until you delete the invoice. Select For X times, if you want to sent the invoice a few times, and then choose the number of times from the dropdown menu on the right." data-toggle="tooltip" title=""></span></span> <select class="pull-right clearfix" id="recurring_times_type" name="recurring_times_type">
                                <option value="forever">
                                    Until deleted
                                </option>

                                <option value="times">
                                    For X times
                                </option>
                            </select></label>
                        </div>

                        <div class="col-md-6" id="times_container">
                            <label for="invoice_recurring_times">No. of times:<select id="invoice_recurring_times" name="invoice[recurring_times]">
                                <option value="1">
                                    1
                                </option>

                                <option value="2">
                                    2
                                </option>

                                <option value="3">
                                    3
                                </option>

                                <option value="4">
                                    4
                                </option>

                                <option value="5">
                                    5
                                </option>

                                <option value="6">
                                    6
                                </option>

                                <option value="7">
                                    7
                                </option>

                                <option value="8">
                                    8
                                </option>

                                <option value="9">
                                    9
                                </option>

                                <option value="10">
                                    10
                                </option>

                                <option value="11">
                                    11
                                </option>

                                <option value="12">
                                    12
                                </option>

                                <option value="13">
                                    13
                                </option>

                                <option value="14">
                                    14
                                </option>

                                <option value="15">
                                    15
                                </option>

                                <option value="16">
                                    16
                                </option>

                                <option value="17">
                                    17
                                </option>

                                <option value="18">
                                    18
                                </option>

                                <option value="19">
                                    19
                                </option>

                                <option value="20">
                                    20
                                </option>

                                <option value="21">
                                    21
                                </option>

                                <option value="22">
                                    22
                                </option>

                                <option value="23">
                                    23
                                </option>

                                <option value="24">
                                    24
                                </option>

                                <option value="25">
                                    25
                                </option>

                                <option value="26">
                                    26
                                </option>

                                <option value="27">
                                    27
                                </option>

                                <option value="28">
                                    28
                                </option>

                                <option value="29">
                                    29
                                </option>

                                <option value="30">
                                    30
                                </option>

                                <option value="31">
                                    31
                                </option>

                                <option value="32">
                                    32
                                </option>

                                <option value="33">
                                    33
                                </option>

                                <option value="34">
                                    34
                                </option>

                                <option value="35">
                                    35
                                </option>

                                <option value="36">
                                    36
                                </option>

                                <option value="37">
                                    37
                                </option>

                                <option value="38">
                                    38
                                </option>

                                <option value="39">
                                    39
                                </option>

                                <option value="40">
                                    40
                                </option>

                                <option value="41">
                                    41
                                </option>

                                <option value="42">
                                    42
                                </option>

                                <option value="43">
                                    43
                                </option>

                                <option value="44">
                                    44
                                </option>

                                <option value="45">
                                    45
                                </option>

                                <option value="46">
                                    46
                                </option>

                                <option value="47">
                                    47
                                </option>

                                <option value="48">
                                    48
                                </option>

                                <option value="49">
                                    49
                                </option>

                                <option value="50">
                                    50
                                </option>

                                <option value="51">
                                    51
                                </option>

                                <option value="52">
                                    52
                                </option>

                                <option value="53">
                                    53
                                </option>

                                <option value="54">
                                    54
                                </option>

                                <option value="55">
                                    55
                                </option>

                                <option value="56">
                                    56
                                </option>

                                <option value="57">
                                    57
                                </option>

                                <option value="58">
                                    58
                                </option>

                                <option value="59">
                                    59
                                </option>

                                <option value="60">
                                    60
                                </option>

                                <option value="61">
                                    61
                                </option>

                                <option value="62">
                                    62
                                </option>

                                <option value="63">
                                    63
                                </option>

                                <option value="64">
                                    64
                                </option>

                                <option value="65">
                                    65
                                </option>

                                <option value="66">
                                    66
                                </option>

                                <option value="67">
                                    67
                                </option>

                                <option value="68">
                                    68
                                </option>

                                <option value="69">
                                    69
                                </option>

                                <option value="70">
                                    70
                                </option>

                                <option value="71">
                                    71
                                </option>

                                <option value="72">
                                    72
                                </option>

                                <option value="73">
                                    73
                                </option>

                                <option value="74">
                                    74
                                </option>

                                <option value="75">
                                    75
                                </option>

                                <option value="76">
                                    76
                                </option>

                                <option value="77">
                                    77
                                </option>

                                <option value="78">
                                    78
                                </option>

                                <option value="79">
                                    79
                                </option>

                                <option value="80">
                                    80
                                </option>

                                <option value="81">
                                    81
                                </option>

                                <option value="82">
                                    82
                                </option>

                                <option value="83">
                                    83
                                </option>

                                <option value="84">
                                    84
                                </option>

                                <option value="85">
                                    85
                                </option>

                                <option value="86">
                                    86
                                </option>

                                <option value="87">
                                    87
                                </option>

                                <option value="88">
                                    88
                                </option>

                                <option value="89">
                                    89
                                </option>

                                <option value="90">
                                    90
                                </option>

                                <option value="91">
                                    91
                                </option>

                                <option value="92">
                                    92
                                </option>

                                <option value="93">
                                    93
                                </option>

                                <option value="94">
                                    94
                                </option>

                                <option value="95">
                                    95
                                </option>

                                <option value="96">
                                    96
                                </option>

                                <option value="97">
                                    97
                                </option>

                                <option value="98">
                                    98
                                </option>

                                <option value="99">
                                    99
                                </option>

                                <option value="100">
                                    100
                                </option>
                            </select></label>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h2>Invoice Summary</h2><span id="summary_box"></span>

                            <p><span id="summary_box">- The price of bitcoin in EUR bitcoin price will be taken from BitPay at the moment the client pays.</span></p>

                            <p><span id="summary_box">- The funds will go to your Armory wallet.</span></p>

                            <p><span id="summary_box">- The invoice will be sent on the 7th day of every month, 0 time(s).</span></p>
                        </div>
                    </div>

                    <div class="buttons">
                        <input class="btn btn-lg btn-danger" name="commit" type="submit" value="Press to save invoice and see delivery options">
                    </div>
                </form>
            </div>
        </div>
    </div><script>
_.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g
    };

    function ordinal(str) {
    str = str.toString();
    str = str.trim();
    if (parseInt(str).toString() == str) {
      var num = parseInt(str);
      if (num > 3 && num < 21) {
        return str + "th";
      } else if (str.substr(0,1) == "-") {
        return "day before the last";
      } else if (str.substr(0,1) == "0") {
        return "last";
      } else if (str.substr(-1) == '1') {
        return str + "st";
      } else if (str.substr(-1) == '2') {
        return str + "nd";
      } else if (str.substr(-1) == '3') {
        return str + "rd"
      } else {
        return str + "th";
      }
    } else {
      return str;
    }
    }

    function toTitleCase(str) {
      return $("option[value=" + str + "]").first().text();
    }

    var vents = {};
    _.extend(vents, Backbone.Events);

    var ItemModel = Backbone.Model.extend({
    total: function() {
      return this.get("price") * this.get("quantity");
    }
    });

    var ItemCollection = Backbone.Collection.extend({
    model: ItemModel
    });

    var InvoiceModel = Backbone.Model.extend({
    initialize: function() {
      this.items = new ItemCollection();
    }
    });

    var RateView = Backbone.View.extend({
    el: "#second_settings_section",
    initialize: function() {
      if (this.model.get("conversion_method") == "") {
        this.model.set("conversion_method", this.$el.find("#invoice_conversion_method").val());
      }

      this.url_for_rates = "/dash/app/4/invoice/rates_for/_CURRENCY_"

      this.render();
      this.model.on("change:conversion_method", this.render, this);
      this.model.on("change:currency", this.get_rates, this);
    },
    get_rates: function() {
      var that = this;
      $.get(this.url_for_rates.replace("_CURRENCY_", this.model.get("currency"))).done(function(data_options){
        that.$el.find("#invoice_conversion_method").html(data_options).trigger("change");
      });
    },
    events: {
      "change #invoice_conversion_method": function() {
        if (this.$el.find("#invoice_conversion_method").val() == "custom") {
          this.model.set("conversion_method", "200");
        } else {
          this.model.set("conversion_method", this.$el.find("#invoice_conversion_method").val());
        }
      },
      "change #conversion_rate": function() {
        var amount = parseFloat(this.$el.find("#conversion_rate").val()).toString();
        if (amount != "NaN") {
          this.model.set("conversion_method", amount);
        }
      }
    },
    render: function() {
      if (parseFloat(this.model.get("conversion_method")).toString() == this.model.get("conversion_method")) {
        this.$el.find("#invoice_conversion_method").val("custom");
        this.$el.find("#conversion_rate").val(this.model.get("conversion_method"));
        this.$el.find("#conversion_rate").closest("label").show();
      } else {
        this.$el.find("#invoice_conversion_method").val(this.model.get("conversion_method"));
        this.$el.find("#conversion_rate").closest("label").hide();
      }
    }
    });

    var ItemView = Backbone.View.extend({
    tagName: "tr",
    template: _.template('<td class="list-controls"><a href="#" class="remove_item"><i class="glyphicon glyphicon-remove"><\/i><\/a><br><\/td><td class="list-description"><textarea class="item_description" id="invoice_items_attributes__description" name="invoice[items_attributes][][description]">{{description}}<\/textarea><\/td><td class="list-qty"><input class="item_qty" id="invoice_items_attributes__quantity" name="invoice[items_attributes][][quantity]" type="text" value="{{quantity}}"><\/td><td class="list-price"><input class="item_price" id="invoice_items_attributes__price" name="invoice[items_attributes][][price]" type="text" value="{{price}}"><\/td><td class="list-amount">{{total}} {{currency}}<\/td>'),
    initialize: function() {
      this.render();
      this.model.on("change", this.update, this);
    },
    update: function() {
      this.$el.find(".list-amount").text(this.model.total() + " " + this.model.get("currency"));
    }, events: {
      "click .remove_item": function(e) {
        e.preventDefault();
        this.model.destroy();
      },
      "change .item_qty": function(e) {
        var quantity = parseInt(this.$el.find(".item_qty").val());
        this.model.set("quantity", quantity);
      },
      "change .item_price": function(e) {
        var price = parseFloat(this.$el.find(".item_price").val());
        this.model.set("price", price);
      },
      "change .item_description": function(e) {
        this.model.set("description", this.$el.find(".item_description").val());
      }
    },
    render: function() {
      var properties = this.model.toJSON();
      properties["total"] = this.model.total();
      this.$el.html(this.template(properties));
    }
    });

    var ItemsView = Backbone.View.extend({
    el: "#items_body",
    initialize: function() {
      this.render_items();
      this.model.items.on("add", this.render_items, this);
      this.model.items.on("remove", this.render_items, this);
      this.model.on("change:currency", this.render_items, this);
    },
    render_items: function() {
      var that = this;
      var currency = that.model.get("currency").toUpperCase();

      this.$el.html("");

      this.model.items.forEach(function(item) {
        item.set("currency", currency)
        var item_view = new ItemView({model: item});
        that.el.appendChild(item_view.el);
      });
    }
    });

    var DiscountView = Backbone.View.extend({
    el: "#discount_settings",
    initialize: function() {
      this.has_discount = (this.model.get("percent") == 0) ? false : true;

      $("#discount").val(this.has_discount ? "on" : "off");
      $("#discount").prop("checked", this.has_discount ? true : false);

      vents.on("invoice:discount_changed", this.toggle_discount, this);
      vents.on("invoice:render_discount", this.render, this);
      vents.trigger("invoice:render_discount");
      this.model.on("change:percent", this.render, this);
    },
    toggle_discount: function() {
      this.has_discount = !this.has_discount;
      this.model.set("percent", (this.has_discount) ? 10 : 0);
      $("#discount").val(this.has_discount ? "on" : "off");
    },
    events: {
      "change #invoice_percent": function() {
        this.model.set("percent", parseFloat(this.$el.find("#invoice_percent").val()));
      }
    },
    render: function() {
      this.$el.find("#invoice_percent").val(this.model.get("percent"));
      if (this.has_discount) {
        $("#percent_type").val("discount");
        this.$el.show();
      } else {
        $("#percent_type").val("regular");
        this.$el.hide();
      }
    }
    });

    var RecurringView = Backbone.View.extend({
    el: "#recurring_settings",
    initialize: function() {
      this.is_recurring = (this.model.get("invoice_type") == "regular") ? false : true;

      this.date_html = this.$el.find("#invoice_interval_container").html();
      this.days_html = '<label for="invoice_interval">No. of days:<select id="invoice_interval" name="invoice[interval]"><option value="1">1<\/option><option value="2">2<\/option><option value="3">3<\/option><option value="4">4<\/option><option value="5">5<\/option><option value="6">6<\/option><option value="7">7<\/option><option value="8">8<\/option><option value="9">9<\/option><option value="10">10<\/option><option value="11">11<\/option><option value="12">12<\/option><option value="13">13<\/option><option value="14">14<\/option><option value="15">15<\/option><option value="16">16<\/option><option value="17">17<\/option><option value="18">18<\/option><option value="19">19<\/option><option value="20">20<\/option><option value="21">21<\/option><option value="22">22<\/option><option value="23">23<\/option><option value="24">24<\/option><option value="25">25<\/option><option value="26">26<\/option><option value="27">27<\/option><option value="28">28<\/option><option value="29">29<\/option><option value="30">30<\/option><option value="31">31<\/option><option value="32">32<\/option><option value="33">33<\/option><option value="34">34<\/option><option value="35">35<\/option><option value="36">36<\/option><option value="37">37<\/option><option value="38">38<\/option><option value="39">39<\/option><option value="40">40<\/option><option value="41">41<\/option><option value="42">42<\/option><option value="43">43<\/option><option value="44">44<\/option><option value="45">45<\/option><option value="46">46<\/option><option value="47">47<\/option><option value="48">48<\/option><option value="49">49<\/option><option value="50">50<\/option><option value="51">51<\/option><option value="52">52<\/option><option value="53">53<\/option><option value="54">54<\/option><option value="55">55<\/option><option value="56">56<\/option><option value="57">57<\/option><option value="58">58<\/option><option value="59">59<\/option><option value="60">60<\/option><option value="61">61<\/option><option value="62">62<\/option><option value="63">63<\/option><option value="64">64<\/option><option value="65">65<\/option><option value="66">66<\/option><option value="67">67<\/option><option value="68">68<\/option><option value="69">69<\/option><option value="70">70<\/option><option value="71">71<\/option><option value="72">72<\/option><option value="73">73<\/option><option value="74">74<\/option><option value="75">75<\/option><option value="76">76<\/option><option value="77">77<\/option><option value="78">78<\/option><option value="79">79<\/option><option value="80">80<\/option><option value="81">81<\/option><option value="82">82<\/option><option value="83">83<\/option><option value="84">84<\/option><option value="85">85<\/option><option value="86">86<\/option><option value="87">87<\/option><option value="88">88<\/option><option value="89">89<\/option><option value="90">90<\/option><option value="91">91<\/option><option value="92">92<\/option><option value="93">93<\/option><option value="94">94<\/option><option value="95">95<\/option><option value="96">96<\/option><option value="97">97<\/option><option value="98">98<\/option><option value="99">99<\/option><option value="100">100<\/option><option value="101">101<\/option><option value="102">102<\/option><option value="103">103<\/option><option value="104">104<\/option><option value="105">105<\/option><option value="106">106<\/option><option value="107">107<\/option><option value="108">108<\/option><option value="109">109<\/option><option value="110">110<\/option><option value="111">111<\/option><option value="112">112<\/option><option value="113">113<\/option><option value="114">114<\/option><option value="115">115<\/option><option value="116">116<\/option><option value="117">117<\/option><option value="118">118<\/option><option value="119">119<\/option><option value="120">120<\/option><option value="121">121<\/option><option value="122">122<\/option><option value="123">123<\/option><option value="124">124<\/option><option value="125">125<\/option><option value="126">126<\/option><option value="127">127<\/option><option value="128">128<\/option><option value="129">129<\/option><option value="130">130<\/option><option value="131">131<\/option><option value="132">132<\/option><option value="133">133<\/option><option value="134">134<\/option><option value="135">135<\/option><option value="136">136<\/option><option value="137">137<\/option><option value="138">138<\/option><option value="139">139<\/option><option value="140">140<\/option><option value="141">141<\/option><option value="142">142<\/option><option value="143">143<\/option><option value="144">144<\/option><option value="145">145<\/option><option value="146">146<\/option><option value="147">147<\/option><option value="148">148<\/option><option value="149">149<\/option><option value="150">150<\/option><option value="151">151<\/option><option value="152">152<\/option><option value="153">153<\/option><option value="154">154<\/option><option value="155">155<\/option><option value="156">156<\/option><option value="157">157<\/option><option value="158">158<\/option><option value="159">159<\/option><option value="160">160<\/option><option value="161">161<\/option><option value="162">162<\/option><option value="163">163<\/option><option value="164">164<\/option><option value="165">165<\/option><option value="166">166<\/option><option value="167">167<\/option><option value="168">168<\/option><option value="169">169<\/option><option value="170">170<\/option><option value="171">171<\/option><option value="172">172<\/option><option value="173">173<\/option><option value="174">174<\/option><option value="175">175<\/option><option value="176">176<\/option><option value="177">177<\/option><option value="178">178<\/option><option value="179">179<\/option><option value="180">180<\/option><\/select><\/label>';

      this.times_html = '<label for="invoice_recurring_times">No. of times:<select id="invoice_recurring_times" name="invoice[recurring_times]"><option value="1">1<\/option><option value="2">2<\/option><option value="3">3<\/option><option value="4">4<\/option><option value="5">5<\/option><option value="6">6<\/option><option value="7">7<\/option><option value="8">8<\/option><option value="9">9<\/option><option value="10">10<\/option><option value="11">11<\/option><option value="12">12<\/option><option value="13">13<\/option><option value="14">14<\/option><option value="15">15<\/option><option value="16">16<\/option><option value="17">17<\/option><option value="18">18<\/option><option value="19">19<\/option><option value="20">20<\/option><option value="21">21<\/option><option value="22">22<\/option><option value="23">23<\/option><option value="24">24<\/option><option value="25">25<\/option><option value="26">26<\/option><option value="27">27<\/option><option value="28">28<\/option><option value="29">29<\/option><option value="30">30<\/option><option value="31">31<\/option><option value="32">32<\/option><option value="33">33<\/option><option value="34">34<\/option><option value="35">35<\/option><option value="36">36<\/option><option value="37">37<\/option><option value="38">38<\/option><option value="39">39<\/option><option value="40">40<\/option><option value="41">41<\/option><option value="42">42<\/option><option value="43">43<\/option><option value="44">44<\/option><option value="45">45<\/option><option value="46">46<\/option><option value="47">47<\/option><option value="48">48<\/option><option value="49">49<\/option><option value="50">50<\/option><option value="51">51<\/option><option value="52">52<\/option><option value="53">53<\/option><option value="54">54<\/option><option value="55">55<\/option><option value="56">56<\/option><option value="57">57<\/option><option value="58">58<\/option><option value="59">59<\/option><option value="60">60<\/option><option value="61">61<\/option><option value="62">62<\/option><option value="63">63<\/option><option value="64">64<\/option><option value="65">65<\/option><option value="66">66<\/option><option value="67">67<\/option><option value="68">68<\/option><option value="69">69<\/option><option value="70">70<\/option><option value="71">71<\/option><option value="72">72<\/option><option value="73">73<\/option><option value="74">74<\/option><option value="75">75<\/option><option value="76">76<\/option><option value="77">77<\/option><option value="78">78<\/option><option value="79">79<\/option><option value="80">80<\/option><option value="81">81<\/option><option value="82">82<\/option><option value="83">83<\/option><option value="84">84<\/option><option value="85">85<\/option><option value="86">86<\/option><option value="87">87<\/option><option value="88">88<\/option><option value="89">89<\/option><option value="90">90<\/option><option value="91">91<\/option><option value="92">92<\/option><option value="93">93<\/option><option value="94">94<\/option><option value="95">95<\/option><option value="96">96<\/option><option value="97">97<\/option><option value="98">98<\/option><option value="99">99<\/option><option value="100">100<\/option><\/select><\/label>';
      this.forever_html = '<label for="invoice_recurring_times"><input class="col-md-3 pull-right clearfix" id="invoice_recurring_times" name="invoice[recurring_times]" type="hidden" value="-1"><\/label>';


      $("#recurring").val(this.is_recurring ? "on" : "off");
      $("#recurring").prop("checked", this.is_recurring ? true : false);

      if (this.model.get("interval") == 0) {
        this.model.set("interval", 7);
      }

      vents.on("invoice:recurring_changed", this.render, this);
      vents.on("invoice:toggle_recuring", this.toggle_recurring, this);
      vents.trigger("invoice:recurring_changed");
      this.model.on("change:invoice_type", this.render, this);
      this.model.on("change:recurring_times", this.render, this);
    },
    events: {
      "change #recurring_type": function() {
        this.model.set("invoice_type", this.$el.find("#recurring_type").val())
      },
      "change #recurring_times_type": function() {
        this.model.set("recurring_times", (this.$el.find("#recurring_times_type").val() == "forever") ? -1 : 1);
      },
      "change #invoice_interval": function() {
        this.model.set("interval", parseInt(this.$el.find("#invoice_interval").val()));
      },
      "change #invoice_recurring_times": function() {
        this.model.set("recurring_times", parseInt(this.$el.find("#invoice_recurring_times").val()));
      }
    },
    toggle_recurring: function() {
        this.is_recurring = !this.is_recurring;
        this.model.set("invoice_type", ((this.is_recurring) ? "date" : "regular"));
        $("#recurring").val(this.is_recurring ? "on" : "off");
    },
    render: function() {
      if (this.is_recurring) {
        this.$el.find("#recurring_type").val(this.model.get("invoice_type"));
        this.$el.find("#recurring_times_type").val((this.model.get("recurring_times") == -1) ? "forever" : "times");
        this.$el.find("#invoice_interval_container").html((this.model.get("invoice_type") == "date") ? this.date_html : this.days_html);
        this.$el.find("#invoice_interval").val(this.model.get("interval"));
        this.$el.find("#times_container").html((this.model.get("recurring_times") == -1) ? this.forever_html : this.times_html);
        this.$el.find("#invoice_recurring_times").val(this.model.get("recurring_times"));
        this.$el.slideDown();
      } else {
        this.$el.slideUp();
      }
    }
    });

    var SummaryView = Backbone.View.extend({
    el: "#summary_box",
    initialize: function() {
      this.render();
      this.model.on("change", this.render, this);
      this.model.items.on("change add remove", this.render, this);
    },
    template: _.template("<p>&#x2713 {{message}}<\/p>"),
    events: {

    },
    render: function() {
      var summary = "";

      if (this.model.get("recipient") != "") {
        if (this.model.get("email") != "") {
          summary += this.template({message: "The invoice is for client " + this.model.get("recipient") + " and will be sent to the " + this.model.get("email") + " email address."});
        } else {
          summary += this.template({message: "The invoice is for client " + this.model.get("recipient") + ". <strong>Please add the email address where the invoice will be sent.<\/strong>"});
        }
      }

      var total = this.model.items.reduce(function(total, item){ return total + item.total();}, 0);
      if (total != 0) {
        var currency = " " + this.model.get("currency").toUpperCase();
        if (this.model.get("percent") != 0) {
          summary += this.template({message: "The value of the invoice is for " + total.toString() + currency + ", minus a " + this.model.get("percent") + "% discount."});
        } else {
          summary += this.template({message: "The value of the invoice is " + total.toString() + currency + "."});
        }
      }

      if (this.model.get("currency") != "btc") {
        if (parseFloat(this.model.get("conversion_method")).toString() != this.model.get("conversion_method")) {
          summary += this.template({message: "The price of bitcoin in " + this.model.get("currency").toUpperCase() +  " bitcoin price will be taken from " + toTitleCase(this.model.get("conversion_method")) + " at the moment the client pays."});
        }
        else {
          summary += this.template({message: "The BTC price is set at " + this.model.get("conversion_method") + " " + this.model.get("currency").toUpperCase() + " per Bitcoin."});
        }

      }

      summary += this.template({message: "The funds will go to your " + toTitleCase(this.model.get("processor")) + " wallet."});

      var ending = (this.model.get("recurring_times") == -1) ? "until the invoice is deleted." : this.model.get("recurring_times") + " time(s)."
      if (this.model.get("invoice_type") == "date") {
        summary += this.template({message: "The invoice will be sent on the " + ordinal(this.model.get("interval")) + " day of every month, " + ending });
      }

      if (this.model.get("invoice_type") == "days") {
        summary += this.template({message: "The invoice will be sent every " + this.model.get("interval") + " day(s), " + ending });
      }

      if (summary == "") {
        this.$el.html("");
      } else {
        this.$el.html(summary);
      }
    }
    });

    var FormView = Backbone.View.extend({
    el: "#invoice_form",
    initialize: function() {
      vents.on("invoice:update_total", this.render_total, this);
      vents.on("invoice:update_summary", this.render_summary, this);
      this.recurring_view = new RecurringView({model: this.model});
      this.discount_view = new DiscountView({model: this.model});
      this.items_view = new ItemsView({model: this.model});
      this.rate_view = new RateView({model: this.model});
      this.summary_view = new SummaryView({model: this.model});
      this.render_total();
      this.model.on("change:currency", this.render_total, this);
      this.model.items.on("change", this.render_total, this);
      this.model.items.on("add", this.render_total, this);
      this.model.items.on("remove", this.render_total, this);
      this.model.on("change:percent", this.render_total, this);

      if (this.model.get("processor") == "") {
        this.model.set("processor", this.$el.find("#invoice_processor").val());
      }
    },
    events: {
      "click #recurring_label": function() {
        vents.trigger("invoice:toggle_recuring");
      },
      "click #discount_label": function() {
        vents.trigger("invoice:discount_changed");
      },
      "click #add_item_button": function(e) {
        e.preventDefault();
        this.model.items.add({price: 0, quantity: 0, description: ""});
      },
      "change #invoice_recipient": function() {
        this.model.set("recipient", this.$el.find("#invoice_recipient").val());
      },
      "change #invoice_email": function() {
        this.model.set("email", this.$el.find("#invoice_email").val());
      },
      "change #invoice_processor": function() {
        this.model.set("processor", this.$el.find("#invoice_processor").val());
      },
      "change #invoice_currency": function() {
        this.model.set("currency", this.$el.find("#invoice_currency").val());
      }
    },
    total: 0,
    render_total: function() {
      var currency = this.model.get("currency").toUpperCase();
      var total = this.model.items.reduce(function(total, item){ return total + item.total();}, 0);

      this.$el.find("#sub_total").text(total.toString() + " " + currency);

      percent = this.model.get("percent");
      var full_amount = (total - (total * (percent/100.0))).toString();
      $("#full_total").text(full_amount + " " + currency);
      vents.trigger("invoice:update_summary");
    },
    render_summary: function() {

    }
    });

    var invoice = new InvoiceModel({
    recipient: "",
    email: "",
    processor: "armory",
    invoice_type: "regular",
    interval: 0,
    currency: "eur",
    conversion_method: "bitpay",
    percent: -0.0,
    recurring_times: 0
    });

    invoice.items.add({price: 0, quantity: 0, description: ""});

    var fv = new FormView({model: invoice});
    </script>

    <footer>
        <div class="col-xs-12 col-md-10 col-md-offset-1 footer">
            <p>CoinSimple, 2015</p>
        </div> 
    </footer>

    <div class="modal fade popup-modal" id="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header"><img alt="Icon" src="./assets/icon-a0d8385901c85c029e1e963c64633063.png"></div>

                <div class="modal-body">
                    <h3 id="modal-title">Title</h3>

                    <p id="modal-text">Text</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button> <a class="btn btn-danger" href="/invoice/new#" id="modal-link">Link</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>